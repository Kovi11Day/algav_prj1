package com.algav.patricia;

import com.algav.patricia.exceptions.PATStringException;
import com.algav.patricia.string.IPATString;
import com.algav.patricia.string.IPATStringE;
import com.algav.patricia.string.IPATWord;
import com.algav.patricia.string.PATString;

public class PatriciaTrie implements IPatriciaTrie{

	private IPATCase[] patTrie;
	private static final int SIZE = 128;
	
	//creer un noeud vide et y ajouter un seul mot
	public PatriciaTrie(IPATString mot){
		this.patTrie = new IPATCase[SIZE];
		this.patTrie[mot.asciiFirst()] 
				= new PATCase (mot.concatEpsilon());
	}
	
	public IPATString getWord (int i){
		return this.patTrie[i].getWord();
				
	}
	
	public IPatriciaTrie getSon (int i){
		return this.patTrie[i].getSon();
	}
	////////***************string_manipulation************************///////////////
	//concatenates epsilon at the end of the word
	public static String concatEpsilon (String s){
		
		char epsilon_char = (char)0;
		String epsilon_str = String.valueOf(epsilon_char);
		return s.concat(epsilon_str);
	}
	
	//get ascii code of first character of word
	public int asciiFirst(){
		char c = this.getStr().charAt(0);
		return (int)c;
	}
	
	//verify if first character is epsilon
	//note: there cannot be another character after epsilon
	public boolean firstIsEpsilon() throws PATStringException{
		char first = this.getStr().charAt(0);
		int first_ascii = (int)first;
		if (first_ascii == 0){
			if (this.getStr().length() > 1){
				throw new 
					PATStringException("Characters after epsilon");
			}
			return true;
		}else{
			return false;
		}
	}
	
	//ajout d'un mot dans un patricia trie
	//note: le patricia trie ne peut pas etre vide
	public void ajout(String word){
		PATString word2 = new PATString(word);
		this.sysAjout(word2.concatEpsilon());
	}
	public void sysAjout (IPATString word){ 
		//cas1
		if (this == null){
			System.out.println("patricia trie is null");
		}
		//cas2
		if (word.length() == 0){
			return;
		}
		
		//cas3
		if (this.getWord(i))
			
	}
	
	
}
